/*! Jsgridconcept - v0.0.1 - 2013-01-22
* https://github.com/InfiniteSpirals/JSGridConcept
* Copyright (c) 2013 InfiniteSpirals; Licensed MIT */
(function(e){var t={},n={},r=function(t,n){n.cellOffset=n.cellDiam+n.cellMargin,this.cells=[],this.subgrids=[];var s=0,o=e({});for(var u=0;u<n.rows;u++)for(var a=0;a<n.cols;a++){var f={backgroundX:a>0?n.cellOffset*a:a,backgroundY:u>0?n.cellOffset*u:u,background:n.background};this.cells.push(new i(f,e(t[s]))),s++}var l={setBackground:function(){for(var e=0;e<this.cells.length;e++)this.cells[e].setBackground()},setRollover:function(){for(var e=0;e<this.cells.length;e++)this.cells[e].rollover()},ripple:function(){e.each(this.cells,function(e,t){o.queue("ripple",function(e){setTimeout(function(){t instanceof i&&t.nextState(),e()},25)})}),o.dequeue("ripple")}},c=function(){for(var e=0;e<n.initMethods.length;e++)l[n.initMethods[e]]&&l[n.initMethods[e]].apply(this)};this.injectGrid=function(t,i){var i=e.extend(n,i),s=[4,5,12,13];for(var o=0;o<s.length;o++)this.cells[s[o]].unbind(),this.cells[s[o]]=this.subgrids.length+1;this.subgrids.push(new r(t,i))},this.invoke=function(e){if(l[e])return l[e].apply(this,Array.prototype.slice.call(arguments,1))},c.apply(this)},i=function(t,n){var r=["show-left","show-right","show-front","show-back"],i=[],s=0;this.setBackground=function(){n.css({backgroundImage:t.background,backgroundPositionX:-t.backgroundX,backgroundPositionY:-t.backgroundY}),n.find(".face").css({backgroundImage:t.background,backgroundPositionX:-t.backgroundX,backgroundPositionY:-t.backgroundY})},this.nextState=function(){n.find(".cube").removeClass().addClass(r[s]).addClass("cube"),s<r.length?s++:s=0},this.rollover=function(){i.push("mouseover");var e=this.nextState;n.mouseover(function(){e()})},this.unbind=function(){e.each(i,function(e,t){n.unbind(t)}),i=[]}};e.fn.JSGridConcept=function(t){var n={rows:6,cols:8,cellDiam:100,cellMargin:4,cellType:"square",background:"url(http://fireflyforest.net/images/firefly/2011/August/psychedelic-violet.jpg)",skin:'<div class="cell"><div class="cube"><div class="face front"></div><div class="face back"></div><div class="face right"></div><div class="face left"></div><div class="face top"></div><div class="face bottom"></div></div</div>',initMethods:["setBackground"]},t=e.extend(n,t);return this.each(function(n){for(var i=0;i<t.rows;i++)for(var s=0;s<t.cols;s++)e(this).append(t.skin);var o=e(this).find(".cell"),u=new r(o,t),a=[o[4],o[5],o[12],o[13]];u.injectGrid(a,{rows:2,cols:2,initMethods:["setBackground","setRollover"],background:"url(http://www.pictureworldbd.com/Flower/image/lotus/pink_lotus_flower_wallpaper.jpg)"}),setTimeout(function(){u.invoke("ripple")},1e3)})}})(jQuery),$(function(){$("#gridconcept").JSGridConcept({rows:6,cols:8,background:'url("http://cdn.all-that-is-interesting.com/wordpress/wp-content/uploads/2012/02/coastline-of-maui.jpg")'})});